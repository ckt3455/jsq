<?phpnamespace backend\models;use Yii;use yii\helpers\ArrayHelper;use yii\web\UploadedFile;/** * This is the model class for table "{{%data_sharing}}". * * @property integer $id * @property string $title * @property string $subtitle * @property string $brand_id * @property string $href * @property string $type * @property integer $append * @property integer $updated * @property integer $is_show * @property string $brand_sign */class DataSharing extends \yii\db\ActiveRecord{    public $file;    /**     * @inheritdoc     */    public static function tableName()    {        return '{{%data_sharing}}';    }    /**     * @inheritdoc     */    public function rules()    {        return [            [['title'], 'required'],            [['append', 'updated','sort','is_show'], 'integer'],            [['title', 'subtitle'], 'string', 'max' => 50],            [['image','href'], 'string', 'max' => 255],            [['type'], 'string', 'max' => 20],            [['file'], 'file',                'skipOnEmpty' => true,                'checkExtensionByMimeType' => false,            ],            ['brand_sign','safe'],        ];    }    /**     * @inheritdoc     */    public function attributeLabels()    {        return [            'id' => 'ID',            'title' => '标题',            'subtitle' => '副标题',            'brand_id' => '品牌',            'href' => '文件地址',            'type' => '文件类型',            'append' => '添加时间',            'updated' => '更新时间',            'sort'=>'排序',            'image'=>'图片（70*95）',            'file'=>'文件上传',            'is_show'=>'是否展示',            'brand_sign'=>'品牌标签'        ];    }    /**     * 自动插入     */    public function beforeSave($insert)    {        if(is_array($this->brand_sign)){            $this->brand_sign=implode(',',$this->brand_sign);        }        if($this->isNewRecord)        {            $this->append = time();            $this->updated = time();        }        else        {            $this->updated = time();        }        return parent::beforeSave($insert);    }    /**     * 获取品牌名称     */    public static function getBrandTitle($brand_id){        $data='';        $category=explode(',',$brand_id);        foreach ($category as $k=>$v){            $brand=Brand::findOne($v);            if(count($brand)>0) {                if($data==''){                    $data=$brand['title'];                }                else{                    $data = $data .','. $brand['title'];                }            }        }        return $data;    }    public static function getList(){        $model=DataSharing::find()->orderBy('sort asc')->asArray()->all();        return ArrayHelper::map($model, 'href', 'title');    }}